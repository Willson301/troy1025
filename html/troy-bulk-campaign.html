<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Troy ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬ - λ€λ‰ μΊ νμΈ λ“±λ΅ μ‹μ¤ν…</title>
    <link rel="stylesheet" href="../css/troy-bulk-campaign.css" />
  </head>
  <body>
    <div id="app">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <div class="logo">
            <img src="../image/horse.png" alt="Troy" class="logo-img" />
            <span class="logo-text">Troy ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬</span>
          </div>
          <div class="user-info">
            <span class="agency-name">λ€ν–‰μ‚¬λ…</span>
            <button class="logout-btn" onclick="window.location.href='/'">
              λ΅κ·Έμ•„μ›ƒ
            </button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Agency Dashboard Section -->
        <section id="agency-dashboard-section" class="section active">
          <div class="section-header">
            <h2>ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬</h2>
            <button id="add-client-btn" class="btn btn-primary">
              + μƒ ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€
            </button>
          </div>

          <!-- Overall Stats -->
          <div class="dashboard-stats">
            <div class="stat-card">
              <div class="stat-number" id="total-campaigns">0</div>
              <div class="stat-label">μ΄ μΊ νμΈ</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="active-campaigns">0</div>
              <div class="stat-label">μ§„ν–‰μ¤‘</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="completed-campaigns">0</div>
              <div class="stat-label">μ™„λ£</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="total-reviews">0</div>
              <div class="stat-label">μ΄ κµ¬λ§¤ν‰</div>
            </div>
          </div>

          <!-- Client List with Combined View -->
          <div class="client-dashboard-container">
            <div class="client-list-section">
              <h3>ν΄λΌμ΄μ–ΈνΈ λ©λ΅</h3>
              <div id="client-dashboard-grid" class="client-dashboard-grid">
                <!-- Client cards with campaigns will be dynamically inserted here -->
              </div>
            </div>
          </div>
        </section>

        <!-- Individual Client Dashboard Section -->
        <section id="client-detail-section" class="section">
          <div class="section-header">
            <div class="header-left">
              <button id="back-to-dashboard" class="btn btn-secondary">
                β† λ€ν–‰μ‚¬ λ€μ‹λ³΄λ“λ΅
              </button>
              <h2 id="client-detail-name">ν΄λΌμ΄μ–ΈνΈ μƒμ„Έ</h2>
            </div>
            <div class="dashboard-actions">
              <button id="client-management-btn" class="btn btn-outline">
                ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬
              </button>
              <button id="single-campaign-btn" class="btn btn-outline">
                μΊ νμΈ λ“±λ΅
              </button>
              <button id="bulk-campaign-btn" class="btn btn-primary">
                λ€λ‰ μΊ νμΈ λ“±λ΅
              </button>
            </div>
          </div>

          <div class="dashboard-stats">
            <div class="stat-card">
              <div class="stat-number" id="client-total-campaigns">0</div>
              <div class="stat-label">μ΄ μΊ νμΈ</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="client-active-campaigns">0</div>
              <div class="stat-label">μ§„ν–‰μ¤‘</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="client-completed-campaigns">0</div>
              <div class="stat-label">μ™„λ£</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="client-total-reviews">0</div>
              <div class="stat-label">μ΄ κµ¬λ§¤ν‰</div>
            </div>
          </div>

          <div class="campaign-table-container">
            <table id="campaign-table" class="campaign-table">
              <thead>
                <tr>
                  <th>κ·Έλ£Ή</th>
                  <th>μƒν’λ…</th>
                  <th>μƒν’ μ΄λ―Έμ§€</th>
                  <th>κ°€κ²©</th>
                  <th>λ©ν‘ μ μ…μ</th>
                  <th>μ§„ν–‰λ¥ </th>
                  <th>μƒνƒ</th>
                  <th>λ“±λ΅μΌ</th>
                </tr>
              </thead>
              <tbody id="campaign-tbody">
                <!-- Campaign rows will be dynamically inserted here -->
              </tbody>
            </table>
          </div>
        </section>
      </main>

      <!-- Add Client Modal -->
      <div id="add-client-modal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3>μƒ ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€</h3>
            <button class="modal-close">&times;</button>
          </div>
          <div class="modal-body">
            <form id="add-client-form">
              <div class="form-group">
                <label for="client-name-input">μ—…μ²΄λ…</label>
                <input type="text" id="client-name-input" required />
              </div>
              <div class="form-group">
                <label for="client-business-name-input">μ‚¬μ—…μλ…</label>
                <input
                  type="text"
                  id="client-business-name-input"
                  required
                  placeholder="λ€ν‘μ λλ” νμ‚¬λ…"
                />
              </div>
              <div class="form-group">
                <label for="client-url-input">λ€ν‘ URL</label>
                <input type="url" id="client-url-input" required />
              </div>
              <div class="form-group">
                <label for="client-business-input">μ‚¬μ—…μλ“±λ΅λ²νΈ</label>
                <input type="text" id="client-business-input" required />
              </div>
              <div class="form-actions">
                <button type="button" class="btn btn-secondary modal-close">
                  μ·¨μ†
                </button>
                <button type="submit" class="btn btn-primary">μ¶”κ°€</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Client Management Modal -->
      <div id="client-management-modal" class="modal">
        <div class="modal-content large">
          <div class="modal-header">
            <h3>ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬</h3>
            <button class="modal-close">&times;</button>
          </div>
          <div class="modal-body">
            <div class="client-management-content">
              <div class="current-client-info">
                <h4>ν„μ¬ ν΄λΌμ΄μ–ΈνΈ μ •λ³΄</h4>
                <div class="client-details">
                  <div class="detail-row">
                    <span class="detail-label">μ—…μ²΄λ…:</span>
                    <span class="detail-value" id="current-client-name">-</span>
                  </div>
                  <div class="detail-row">
                    <span class="detail-label">μ‚¬μ—…μλ…:</span>
                    <span class="detail-value" id="current-business-name"
                      >-</span
                    >
                  </div>
                  <div class="detail-row">
                    <span class="detail-label">μ‚¬μ—…μλ²νΈ:</span>
                    <span class="detail-value" id="current-business-number"
                      >-</span
                    >
                  </div>
                  <div class="detail-row">
                    <span class="detail-label">λ€ν‘ URL:</span>
                    <span class="detail-value" id="current-client-url">-</span>
                  </div>
                  <div class="detail-row">
                    <span class="detail-label">λ“±λ΅μΌ:</span>
                    <span class="detail-value" id="current-created-date"
                      >-</span
                    >
                  </div>
                </div>
              </div>

              <div class="client-actions">
                <h4>κ΄€λ¦¬ λ©”λ‰΄</h4>
                <div class="action-buttons">
                  <button id="edit-client-btn" class="btn btn-outline">
                    ν΄λΌμ΄μ–ΈνΈ μ •λ³΄ μμ •
                  </button>
                  <button id="export-campaigns-btn" class="btn btn-outline">
                    μΊ νμΈ λ°μ΄ν„° λ‚΄λ³΄λ‚΄κΈ°
                  </button>
                  <button id="reset-client-data-btn" class="btn btn-outline">
                    μΊ νμΈ λ°μ΄ν„° μ΄κΈ°ν™”
                  </button>
                  <button id="delete-client-btn" class="btn btn-danger">
                    ν΄λΌμ΄μ–ΈνΈ μ‚­μ 
                  </button>
                </div>
              </div>

              <div class="client-statistics">
                <h4>ν†µκ³„ μ”μ•½</h4>
                <div class="stats-grid">
                  <div class="stat-box">
                    <div class="stat-title">μ΄ μΊ νμΈ</div>
                    <div class="stat-number" id="mgmt-total-campaigns">0</div>
                  </div>
                  <div class="stat-box">
                    <div class="stat-title">μ§„ν–‰μ¤‘</div>
                    <div class="stat-number" id="mgmt-active-campaigns">0</div>
                  </div>
                  <div class="stat-box">
                    <div class="stat-title">μ™„λ£</div>
                    <div class="stat-number" id="mgmt-completed-campaigns">
                      0
                    </div>
                  </div>
                  <div class="stat-box">
                    <div class="stat-title">λ©ν‘ μ μ…</div>
                    <div class="stat-number" id="mgmt-target-traffic">0</div>
                  </div>
                  <div class="stat-box">
                    <div class="stat-title">μ™„λ£ μ μ…</div>
                    <div class="stat-number" id="mgmt-completed-traffic">0</div>
                  </div>
                  <div class="stat-box">
                    <div class="stat-title">μ§‘ν–‰λ¥ </div>
                    <div class="stat-number" id="mgmt-execution-rate">0%</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Bulk Campaign Modal -->
      <div id="bulk-campaign-modal" class="modal">
        <div class="modal-content large">
          <div class="modal-header">
            <h3>λ€λ‰ μΊ νμΈ λ“±λ΅</h3>
            <button class="modal-close">&times;</button>
          </div>
          <div class="modal-body">
            <div class="bulk-form-container">
              <div class="bulk-form-left">
                <div class="form-header">
                  <h4>μƒν’ URL λ“±λ΅</h4>
                  <button
                    type="button"
                    id="add-url-row-btn"
                    class="btn btn-outline btn-sm"
                  >
                    + μ¶”κ°€
                  </button>
                </div>
                <div class="url-inputs-container" id="url-inputs-container">
                  <div class="url-input-row" data-index="1">
                    <div class="row-header">
                      <span class="row-number">1</span>
                      <button
                        type="button"
                        class="remove-row-btn"
                        style="display: none"
                      >
                        Γ—
                      </button>
                    </div>
                    <input
                      type="url"
                      class="url-input"
                      placeholder="https://example.com/product1"
                    />
                    <div class="traffic-section">
                      <label class="traffic-label">μ μ…μ</label>
                      <input
                        type="number"
                        class="traffic-input"
                        value="200"
                        min="1"
                        max="9999"
                      />
                      <span class="unit">κ°</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="bulk-form-right">
                <div class="cart-container">
                  <div class="cart-header">
                    <h4>π›’ μΊ νμΈ μ¥λ°”κµ¬λ‹</h4>
                    <div class="cart-info">
                      μ ν’κ°€κ²© Γ— μ μ…μ Γ— 2,500μ› = μΊ νμΈ λΉ„μ©
                    </div>
                  </div>

                  <div class="cart-items" id="cart-items">
                    <div class="empty-cart">
                      <div class="empty-icon"></div>
                      <div class="empty-text">λ“±λ΅ν•  μΊ νμΈμ„ μ¶”κ°€ν•΄μ£Όμ„Έμ”</div>
                    </div>
                  </div>

                  <div class="cart-summary">
                    <div class="summary-row">
                      <span class="summary-label">μ΄ μΊ νμΈ</span>
                      <span class="summary-value" id="cart-campaign-count"
                        >0κ°</span
                      >
                    </div>
                    <div class="summary-row">
                      <span class="summary-label">μ΄ μ μ…μ</span>
                      <span class="summary-value" id="cart-total-traffic"
                        >0κ°</span
                      >
                    </div>
                    <div class="summary-divider"></div>
                    <div class="summary-row total">
                      <span class="summary-label">μ΄ κ²°μ κΈμ•΅</span>
                      <span class="summary-value" id="cart-total-price"
                        >0μ›</span
                      >
                    </div>
                  </div>

                  <div class="deposit-section">
                    <div class="deposit-row">
                      <span class="deposit-label">λ³΄μ  μμΉκΈ</span>
                      <span class="deposit-amount" id="deposit-balance"
                        >1,000,000μ›</span
                      >
                    </div>
                    <div class="deposit-row">
                      <span class="deposit-label">κ²°μ  ν›„ μ”μ•΅</span>
                      <span class="remaining-amount" id="remaining-balance"
                        >1,000,000μ›</span
                      >
                    </div>
                  </div>

                  <div class="cart-actions">
                    <button
                      type="button"
                      id="preview-btn"
                      class="btn btn-outline btn-sm"
                    >
                      λ―Έλ¦¬λ³΄κΈ°
                    </button>
                    <button
                      type="button"
                      id="bulk-register-btn"
                      class="btn btn-primary btn-block"
                      disabled
                    >
                      μμΉκΈμΌλ΅ κ²°μ 
                    </button>
                    <button
                      type="button"
                      id="charge-deposit-btn"
                      class="btn btn-warning btn-block"
                      style="display: none"
                    >
                      μμΉκΈ μ¶©μ „ν•κΈ°
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div
              id="preview-section"
              class="preview-section"
              style="display: none"
            >
              <h4>μ¤ν¬λν•‘ κ²°κ³Ό λ―Έλ¦¬λ³΄κΈ°</h4>
              <div id="preview-grid" class="preview-grid">
                <!-- Preview items will be dynamically inserted here -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Campaign Modal -->
      <div id="quick-campaign-modal" class="modal">
        <div class="modal-content medium">
          <div class="modal-header">
            <h3>κ°„νΈ μΊ νμΈ λ“±λ΅</h3>
            <button class="modal-close">&times;</button>
          </div>
          <div class="modal-body">
            <div class="quick-campaign-form">
              <!-- URL Input Section -->
              <div class="url-section">
                <div class="form-group">
                  <label for="quick-campaign-url">μΏ ν΅ μƒν’ URL</label>
                  <div class="url-input-wrapper">
                    <input
                      type="url"
                      id="quick-campaign-url"
                      placeholder="https://www.coupang.com/vp/products/..."
                      required
                    />
                    <button
                      type="button"
                      id="quick-extract-btn"
                      class="btn btn-outline btn-sm"
                    >
                      μ¶”μ¶
                    </button>
                  </div>
                </div>
              </div>

              <!-- Product Info Section -->
              <div
                id="quick-product-info"
                class="product-info-section"
                style="display: none"
              >
                <h4>μƒν’ μ •λ³΄</h4>
                <div class="product-card">
                  <div class="product-image">
                    <img id="quick-product-image" src="" alt="μƒν’ μ΄λ―Έμ§€" />
                  </div>
                  <div class="product-details">
                    <div class="product-title" id="quick-product-title">-</div>
                    <div class="product-brand" id="quick-product-brand">-</div>
                    <div class="product-price" id="quick-product-price">-</div>
                  </div>
                </div>

                <!-- Campaign Settings -->
                <div class="campaign-settings">
                  <!-- Product Info Tags -->
                  <div class="form-group">
                    <div class="product-tags">
                      <span class="product-tag brand-tag" id="quick-brand-tag"
                        >λΈλλ“λ…</span
                      >
                      <span
                        class="product-tag product-tag-name"
                        id="quick-product-tag"
                        >μ ν’λ…</span
                      >
                    </div>
                  </div>

                  <div class="form-group">
                    <label>μ„λΉ„μ¤ λ©λ΅</label>
                    <div class="service-options">
                      <label class="checkbox-label">
                        <input type="checkbox" value="λ΅μΌ“λ°°μ†΅κµ¬λ§¤ν‰" checked />
                        <span class="checkmark"></span>
                        λ΅μΌ“λ°°μ†΅κµ¬λ§¤ν‰
                      </label>
                      <label class="checkbox-label">
                        <input type="checkbox" value="ν¬ν† κµ¬λ§¤ν‰" />
                        <span class="checkmark"></span>
                        ν¬ν† κµ¬λ§¤ν‰
                      </label>
                      <label class="checkbox-label">
                        <input type="checkbox" value="κ°€κµ¬λ§¤ν‰" />
                        <span class="checkmark"></span>
                        κ°€κµ¬λ§¤ν‰
                      </label>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="quick-target-traffic">λ©ν‘ μ μ…μ</label>
                    <input
                      type="number"
                      id="quick-target-traffic"
                      value="200"
                      min="1"
                      max="9999"
                    />
                    <span class="unit">κ°</span>
                  </div>

                  <!-- Price Calculation -->
                  <div class="price-calculation">
                    <div class="calc-row">
                      <span>μ ν’κ°€κ²© Γ— μ μ…μ</span>
                      <span id="quick-product-cost">0μ›</span>
                    </div>
                    <div class="calc-row">
                      <span>μΊ νμΈλΉ„μ© (2,500μ› Γ— μ μ…μ)</span>
                      <span id="quick-review-cost">500,000μ›</span>
                    </div>
                    <div class="calc-divider"></div>
                    <div class="calc-row total">
                      <span>μ΄ μΊ νμΈ λΉ„μ©</span>
                      <span id="quick-total-cost">500,000μ›</span>
                    </div>
                  </div>

                  <!-- Campaign Actions -->
                  <div class="campaign-actions">
                    <div class="deposit-info">
                      <span
                        >λ³΄μ  μμΉκΈ:
                        <strong id="quick-current-deposit"
                          >1,000,000μ›</strong
                        ></span
                      >
                      <span
                        >κ²°μ  ν›„ μ”μ•΅:
                        <strong id="quick-remaining-deposit"
                          >500,000μ›</strong
                        ></span
                      >
                    </div>
                    <div class="action-buttons">
                      <button
                        type="button"
                        id="quick-register-btn"
                        class="btn btn-primary btn-block"
                      >
                        μμΉκΈμΌλ΅ μΊ νμΈ λ“±λ΅
                      </button>
                      <button
                        type="button"
                        id="quick-charge-btn"
                        class="btn btn-warning btn-block"
                        style="display: none"
                      >
                        μμΉκΈ μ¶©μ „ν•κΈ°
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Loading Overlay -->
      <div id="loading-overlay" class="loading-overlay" style="display: none">
        <div class="loading-content">
          <div class="loading-spinner"></div>
          <div class="loading-text">μƒν’ μ •λ³΄λ¥Ό κ°€μ Έμ¤λ” μ¤‘...</div>
          <div class="loading-progress">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 0%"></div>
            </div>
            <div class="progress-text">0 / 0</div>
          </div>
        </div>
      </div>
    </div>

    <script src="../js/troy-bulk-campaign.js"></script>
  </body>
</html>
