<!DOCTYPE html>
<html lang="ko">
  <head>
    <!-- 파일: html/agency-dashboard.html | 목적: 대행사 대시보드 화면 -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>대행사 대시보드</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <!-- 대행사 전용 스타일 -->
    <link rel="stylesheet" href="../css/./agency-dashboard.css" />
    <!-- 공통 대시보드 스타일 -->
    <link rel="stylesheet" href="../css/dashboard-common.css" />
    <link rel="stylesheet" href="../css/service-intro.css" />
    <link rel="stylesheet" href="../css/service-info-component.css" />
    <!-- 캠페인 관리 스타일 -->
    <link rel="stylesheet" href="../css/campaign-management.css" />
  </head>
  <body>
    <!-- 레이아웃 컨테이너(사이드바 + 본문) -->
    <div class="dashboard-container">
      <!-- 사이드바: 사용자 정보/메뉴/로그아웃 -->
      <div class="sidebar">
        <div class="logo-section">
          <div class="logo" onclick="goToHome()" style="cursor: pointer">
            TROY
          </div>
          <div class="company-name">트로이 인터내셔널</div>
        </div>

        <div class="user-info">
          <div class="user-name">대행사님</div>
          <div class="user-role">대행사</div>
        </div>

        <button class="new-campaign-btn" onclick="openCampaignCreateModal()">
          <strong>새로운 캠페인 등록</strong>
          <div id="container-stars">
            <div id="stars"></div>
          </div>
          <div id="glow">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
        </button>
        <div class="agency-menu-section">
          <div class="menu-item" onclick="loadNoticeBoard()">공지사항</div>
          <div
            class="menu-item"
            data-menu="service-intro"
            onclick="loadServiceInfo()"
          >
            서비스 소개
          </div>
        </div>

        <div class="agency-menu-section">
          <div class="menu-title">대행사 관리</div>
          <div class="menu-item" onclick="loadCampaignManagement()">
            캠페인 관리
          </div>
          <!-- <div
            class="menu-item"
            onclick="window.location.href='campaign-create.html'"
          >
            캠페인 생성
          </div> -->
          <div class="menu-item" onclick="loadClientManagement()">
            클라이언트 관리
          </div>
          <div class="menu-item" onclick="loadAgencyScheduleManagement()">
            스케줄 관리
          </div>
        </div>

        <div class="agency-menu-section">
          <div class="menu-title">고객지원</div>
          <div class="menu-item" onclick="loadAgencyOneToOne()">1:1 문의</div>
        </div>

        <div class="agency-menu-section">
          <div class="menu-title">계정관리</div>
          <div class="menu-item" onclick="loadAgencyPaymentHistory()">
            결제내역
          </div>
          <div class="menu-item" onclick="loadAgencyMyInfo()">나의 정보</div>
        </div>

        <div
          class="logout"
          onclick="window.location.href='/'"
          style="cursor: pointer"
        >
          로그아웃
        </div>
      </div>

      <!-- 메인 콘텐츠: 동적 로딩 영역 (초기 비움) -->
      <div class="main-content"></div>
    </div>

    <!-- 공통 대시보드 스크립트 -->
    <script src="../js/dashboard-common.js"></script>
    <script src="../js/components/campaign-management.js"></script>
    <script>
      // 즉시 실행
      if (typeof ensureRoleSessionToken === "function")
        ensureRoleSessionToken();
      if (typeof updateSidebarNameFromProfile === "function")
        updateSidebarNameFromProfile();

      // DOM 로드 후에도 실행 (안전장치)
      document.addEventListener("DOMContentLoaded", function () {
        if (typeof ensureRoleSessionToken === "function")
          ensureRoleSessionToken();
        if (typeof updateSidebarNameFromProfile === "function")
          updateSidebarNameFromProfile();

        // 대행사 대시보드 초기 로딩 시 캠페인 관리 화면 자동 로드
        if (typeof loadCampaignManagement === "function") {
          loadCampaignManagement();
        }
      });
    </script>
    <script src="../js/agency-dashboard.js"></script>
  </body>
</html>
